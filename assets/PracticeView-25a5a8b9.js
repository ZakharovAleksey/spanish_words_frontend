import{i as se,_ as T,r as o,o as c,j as y,a as r,e as n,w as s,g as h,t as f,l as oe,c as _,m as x,p as N,h as W,W as Q,C as X,F as R,n as B,q as fe,E as D,P as Z,s as ne,v as V,x as ye,y as K,d as $,k as P,b as O,z as q,A as xe,B as ve,D as be,G as S,H as Ee}from"./index-532e961d.js";function re(e){return e.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function ie(e,t){return re(e)===re(t)}function ke(e,t,i){return e>=t&&e<i}function Ce(e){const t=(new Date-e)/1e3,i=Math.trunc(t/se),b=Math.round(t-i*se);return`${i}:${b}`}const we={name:"TranslateSingleWord",props:{exercise_data:Object,translate:Object,clean_exercise:Boolean,show_error_message:Boolean,is_readonly:Boolean},data(){return{user_input:""}},emits:["exerciseCheckEnabled","isExerciseDoneCorrect","exerciseCleaned","checkExercise"],watch:{clean_exercise(e){if(e){this.user_input="",this.$emit("exerciseCleaned");const t=this.user_input==="";this.$emit("exerciseCheckEnabled",!t)}}},computed:{is_user_input_correct(){return ie(this.user_input,this.exercise_data[this.translate.to])}},methods:{notifyParent(){const e=this.user_input==="";this.$emit("exerciseCheckEnabled",!e),this.$emit("isExerciseDoneCorrect",{correct:this.is_user_input_correct,en:this.exercise_data.en,es:this.exercise_data.es})},handleEnterButton(){this.$emit("checkExercise")}}},j=e=>(N("data-v-cac8dece"),e=e(),W(),e),Te=j(()=>r("p",{class:"text-left title pb-2"},[r("b",null,"Translate this word:")],-1)),Ie={class:"min-input-width"},Se={class:"save-alert-space"},Ae={key:0},Le={class:"red-text"},De={class:"mb-1"},Oe=j(()=>r("b",{class:"title"},"Incorrect",-1)),Ne=j(()=>r("b",null,"Correct Answer:",-1)),We={class:"green-text"},Re={class:"mb-1"},Be=j(()=>r("b",{class:"title"},"Amazing",-1));function Ve(e,t,i,b,a,l){const u=o("v-text-field"),d=o("v-icon"),p=o("v-alert");return c(),y("div",null,[Te,r("div",Ie,[n(u,{variant:"outlined",readonly:!0},{default:s(()=>[h(f(i.exercise_data[i.translate.from]),1)]),_:1}),n(u,{modelValue:a.user_input,"onUpdate:modelValue":t[0]||(t[0]=g=>a.user_input=g),readonly:i.is_readonly,label:"Translation",variant:"outlined",onInput:l.notifyParent,onKeyup:oe(l.handleEnterButton,["enter"])},null,8,["modelValue","readonly","onInput","onKeyup"]),r("div",Se,[i.show_error_message?(c(),y("div",Ae,[l.is_user_input_correct?x("",!0):(c(),_(p,{key:0,"border-color":"red",border:"start",class:"text-left text-subtitle-2"},{default:s(()=>[r("div",Le,[r("div",De,[n(d,{class:"mr-1"},{default:s(()=>[h("mdi-close-circle")]),_:1}),Oe]),Ne,h(" "+f(i.exercise_data[i.translate.to]),1)])]),_:1})),l.is_user_input_correct?(c(),_(p,{key:1,"border-color":"success",border:"start",class:"text-left text-subtitle-2"},{default:s(()=>[r("div",We,[r("div",Re,[n(d,{class:"mr-1"},{default:s(()=>[h("mdi-check")]),_:1}),Be]),h(" Good job! Can you do the next one? ")])]),_:1})):x("",!0)])):x("",!0)])])])}const ae=T(we,[["render",Ve],["__scopeId","data-v-cac8dece"]]),$e={name:"TranslateSingleWord",props:{exercise_data:Object,translate:Object,clean_exercise:Boolean,show_error_message:Boolean,is_readonly:Boolean},emits:["exerciseCheckEnabled","isExerciseDoneCorrect"],created(){this.$emit("exerciseCheckEnabled",!0)},data(){return{user_input:""}},methods:{updateWordStatus(e){this.is_readonly||(e.user_knows_translation=!e.user_knows_translation,e.icon=e.user_knows_translation?Q.REMEMBERED:Q.FORGOTTEN,e.color=e.user_knows_translation?X.GOOD:X.BAD,this.$emit("isExerciseDoneCorrect",{correct:e.user_knows_translation,en:e.en,es:e.es}))}}},Pe=r("p",{class:"text-left title pb-2"},[r("b",null,"Click on the words, with unknown translations:")],-1),Ge={style:{"max-width":"1000px"}};function Fe(e,t,i,b,a,l){const u=o("v-chip");return c(),y("div",null,[Pe,r("div",Ge,[(c(!0),y(R,null,B(i.exercise_data.word_translation,d=>(c(),_(u,{"prepend-icon":d.icon,class:"mx-1 my-1",color:d.color,size:"large",onClick:p=>l.updateWordStatus(d)},{default:s(()=>[h(f(d[i.translate.from]),1)]),_:2},1032,["prepend-icon","color","onClick"]))),256))])])}const ce=T($e,[["render",Fe]]);const je={name:"TranslateSingleWord",props:{exercise_data:Object,translate:Object,clean_exercise:Boolean,show_error_message:Boolean,is_readonly:Boolean},data(){return{user_input:""}},emits:["exerciseCheckEnabled","isExerciseDoneCorrect","exerciseCleaned","checkExercise"],watch:{clean_exercise(e){if(e){this.user_input="",this.$emit("exerciseCleaned");const t=this.user_input==="";this.$emit("exerciseCheckEnabled",!t)}}},computed:{is_user_input_correct(){return ie(this.user_input,this.exercise_data.correct_translation)}},methods:{notifyParent(){const e=this.user_input==="";this.$emit("exerciseCheckEnabled",!e),this.$emit("isExerciseDoneCorrect",{correct:this.is_user_input_correct,en:this.exercise_data.en,es:this.exercise_data.es})},handleEnterButton(){this.$emit("checkExercise")}}},M=e=>(N("data-v-c09ffd00"),e=e(),W(),e),Me=M(()=>r("p",{class:"text-left title mb-2"},[r("b",null,"Translate this sentence:")],-1)),ze={class:"save-alert-space"},Ue={key:0},He={class:"red-text"},Ke={class:"mb-1"},qe=M(()=>r("b",{class:"title"},"Incorrect",-1)),Ye=M(()=>r("b",null,"Correct Answer:",-1)),Je={class:"green-text"},Qe={class:"mb-1"},Xe=M(()=>r("b",{class:"title"},"Amazing",-1));function Ze(e,t,i,b,a,l){const u=o("v-text-field"),d=o("v-icon"),p=o("v-alert");return c(),y("div",null,[Me,r("div",null,[n(u,{variant:"outlined",readonly:!0},{default:s(()=>[h(f(i.exercise_data.sentence_to_translate),1)]),_:1}),n(u,{modelValue:a.user_input,"onUpdate:modelValue":t[0]||(t[0]=g=>a.user_input=g),readonly:i.is_readonly,label:"Translation",variant:"outlined",onInput:l.notifyParent,onKeyup:oe(l.handleEnterButton,["enter"])},null,8,["modelValue","readonly","onInput","onKeyup"])]),r("div",ze,[i.show_error_message?(c(),y("div",Ue,[l.is_user_input_correct?x("",!0):(c(),_(p,{key:0,"border-color":"red",border:"start",class:"text-left text-subtitle-2"},{default:s(()=>[r("div",He,[r("div",Ke,[n(d,{class:"mr-1"},{default:s(()=>[h("mdi-close-circle")]),_:1}),qe]),Ye,h(" "+f(i.exercise_data.correct_translation),1)])]),_:1})),l.is_user_input_correct?(c(),_(p,{key:1,"border-color":"success",border:"start",class:"text-left text-subtitle-2"},{default:s(()=>[r("div",Je,[r("div",Qe,[n(d,{class:"mr-1"},{default:s(()=>[h("mdi-check")]),_:1}),Xe]),h(" Good job! Can you do the next one? ")])]),_:1})):x("",!0)])):x("",!0)])])}const le=T(je,[["render",Ze],["__scopeId","data-v-c09ffd00"]]);const Y={DEFAULT:"grey-darken-3",SELECTED:"light-blue-darken-3"},et={name:"TranslateSingleWord",props:{exercise_data:Object,translate:Object,clean_exercise:Boolean,show_error_message:Boolean,is_readonly:Boolean},data(){return{user_input:"",choices:[]}},created(){this.makeChoices()},emits:["exerciseCheckEnabled","isExerciseDoneCorrect","exerciseCleaned"],watch:{clean_exercise(e){e&&(this.user_input="",this.$emit("exerciseCleaned"),this.$emit("exerciseCheckEnabled",this.isAnyWordChosen()))},exercise_data:{handler(){this.makeChoices()},deep:!0},is_readonly(e){if(e){const t=this.choices.findIndex(i=>i.is_selected);this.choices[t].color=this.is_user_input_correct?"green":"red"}}},computed:{is_user_input_correct(){return this.user_input===this.exercise_data[this.translate.to]}},methods:{isAnyWordChosen(){return this.choices.findIndex(e=>e.is_selected)!==-1},makeChoices(){this.choices=this.exercise_data.choices.map((e,t)=>({word:e,color:Y.DEFAULT,is_selected:!1}))},notifyParent(){this.$emit("exerciseCheckEnabled",this.isAnyWordChosen()),this.$emit("isExerciseDoneCorrect",{correct:this.is_user_input_correct,en:this.exercise_data.en,es:this.exercise_data.es})},updateWordStatus(e){this.is_readonly||(this.choices.forEach(t=>{t.is_selected=!1,t.color=Y.DEFAULT}),e.is_selected=!0,e.color=Y.SELECTED,this.user_input=e.word,this.notifyParent())}}},z=e=>(N("data-v-ac671ac4"),e=e(),W(),e),tt=z(()=>r("p",{class:"text-left title mb-2"},[r("b",null,"Choose correct translation:")],-1)),st={class:"black-text"},nt={class:"save-alert-space"},rt={key:0},ot={class:"red-text"},it={class:"mb-1"},at=z(()=>r("b",{class:"title"},"Incorrect",-1)),ct=z(()=>r("b",null,"Correct Answer:",-1)),lt={class:"green-text"},_t={class:"mb-1"},dt=z(()=>r("b",{class:"title"},"Amazing",-1));function ut(e,t,i,b,a,l){const u=o("v-text-field"),d=o("v-chip"),p=o("v-col"),g=o("v-row"),v=o("v-container"),k=o("v-icon"),C=o("v-alert");return c(),y("div",null,[tt,r("div",null,[n(u,{variant:"outlined",readonly:!0},{default:s(()=>[h(f(i.exercise_data[i.translate.from]),1)]),_:1}),n(v,{class:"px-0"},{default:s(()=>[n(g,null,{default:s(()=>[(c(!0),y(R,null,B(a.choices,E=>(c(),_(p,null,{default:s(()=>[n(d,{color:E.color,onClick:L=>l.updateWordStatus(E),size:"large",label:!0},{default:s(()=>[r("p",st,f(E.word),1)]),_:2},1032,["color","onClick"])]),_:2},1024))),256))]),_:1})]),_:1})]),r("div",nt,[i.show_error_message?(c(),y("div",rt,[l.is_user_input_correct?x("",!0):(c(),_(C,{key:0,"border-color":"red",border:"start",class:"text-left text-subtitle-2"},{default:s(()=>[r("div",ot,[r("div",it,[n(k,{class:"mr-1"},{default:s(()=>[h("mdi-close-circle")]),_:1}),at]),ct,h(" "+f(i.exercise_data[i.translate.to]),1)])]),_:1})),l.is_user_input_correct?(c(),_(C,{key:1,"border-color":"success",border:"start",class:"text-left text-subtitle-2"},{default:s(()=>[r("div",lt,[r("div",_t,[n(k,{class:"mr-1"},{default:s(()=>[h("mdi-check")]),_:1}),dt]),h(" Good job! Can you do the next one? ")])]),_:1})):x("",!0)])):x("",!0)])])}const _e=T(et,[["render",ut],["__scopeId","data-v-ac671ac4"]]);const J={DEFAULT:"grey-darken-3",SELECTED:"light-blue-darken-3"},ht={name:"TranslateSingleWord",props:{exercise_data:Object,translate:Object,clean_exercise:Boolean,show_error_message:Boolean,is_readonly:Boolean},data(){return{user_input:"",choices:[]}},created(){this.makeChoices()},emits:["exerciseCheckEnabled","isExerciseDoneCorrect","exerciseCleaned"],watch:{clean_exercise(e){e&&(this.user_input="",this.$emit("exerciseCleaned"),this.$emit("exerciseCheckEnabled",this.isAnyWordChosen()))},exercise_data:{handler(){this.makeChoices()},deep:!0},is_readonly(e){if(e){const t=this.choices.findIndex(i=>i.is_selected);this.choices[t].color=this.is_user_input_correct?"green":"red"}}},computed:{is_user_input_correct(){return this.user_input===this.exercise_data[this.translate.to]}},methods:{isAnyWordChosen(){return this.choices.findIndex(e=>e.is_selected)!==-1},makeChoices(){this.choices=this.exercise_data.choices.map((e,t)=>({word:e,color:J.DEFAULT,is_selected:!1}))},notifyParent(){this.$emit("exerciseCheckEnabled",this.isAnyWordChosen()),this.$emit("isExerciseDoneCorrect",{correct:this.is_user_input_correct,en:this.exercise_data.en,es:this.exercise_data.es})},updateWordStatus(e){this.is_readonly||(this.choices.forEach(t=>{t.is_selected=!1,t.color=J.DEFAULT}),e.is_selected=!0,e.color=J.SELECTED,this.user_input=e.word,this.notifyParent())}}},U=e=>(N("data-v-d04adcc3"),e=e(),W(),e),mt=U(()=>r("p",{class:"text-left title mb-2"},[r("b",null,"Fill the gap:")],-1)),pt={class:"black-text"},gt={class:"save-alert-space"},ft={key:0},yt={class:"red-text"},xt={class:"mb-1"},vt=U(()=>r("b",{class:"title"},"Incorrect",-1)),bt=U(()=>r("b",null,"Correct Answer:",-1)),Et={class:"green-text"},kt={class:"mb-1"},Ct=U(()=>r("b",{class:"title"},"Amazing",-1));function wt(e,t,i,b,a,l){const u=o("v-text-field"),d=o("v-chip"),p=o("v-col"),g=o("v-row"),v=o("v-container"),k=o("v-icon"),C=o("v-alert");return c(),y("div",null,[mt,r("div",null,[n(u,{variant:"outlined",readonly:!0},{default:s(()=>[h(f(i.exercise_data.sentence_with_gap),1)]),_:1}),n(v,{class:"px-0"},{default:s(()=>[n(g,null,{default:s(()=>[(c(!0),y(R,null,B(a.choices,E=>(c(),_(p,null,{default:s(()=>[n(d,{color:E.color,onClick:L=>l.updateWordStatus(E),size:"large",label:!0},{default:s(()=>[r("p",pt,f(E.word),1)]),_:2},1032,["color","onClick"])]),_:2},1024))),256))]),_:1})]),_:1})]),r("div",gt,[i.show_error_message?(c(),y("div",ft,[l.is_user_input_correct?x("",!0):(c(),_(C,{key:0,"border-color":"red",border:"start",class:"text-left text-subtitle-2"},{default:s(()=>[r("div",yt,[r("div",xt,[n(k,{class:"mr-1"},{default:s(()=>[h("mdi-close-circle")]),_:1}),vt]),bt,h(" "+f(i.exercise_data[i.translate.to]),1)])]),_:1})),l.is_user_input_correct?(c(),_(C,{key:1,"border-color":"success",border:"start",class:"text-left text-subtitle-2"},{default:s(()=>[r("div",Et,[r("div",kt,[n(k,{class:"mr-1"},{default:s(()=>[h("mdi-check")]),_:1}),Ct]),h(" Good job! Can you do the next one? ")])]),_:1})):x("",!0)])):x("",!0)])])}const de=T(ht,[["render",wt],["__scopeId","data-v-d04adcc3"]]);const G={AWESOME:0,GREAT:1,AVERAGE:2,BAD:3},Tt=[{result:G.AWESOME,min:100,max:1/0,msg:"You made no mistakes in this lesson",title:"Perfect lesson!",icon:"mdi-rocket-launch-outline",color:"success"},{result:G.GREAT,min:80,max:100,msg:"Keep it up, you're doing great",title:"Fantastic Progress!",icon:"mdi-emoticon-happy-outline",color:"info"},{result:G.AVERAGE,min:50,max:80,msg:"You're making progress, keep going",title:"Good Effort!",icon:"mdi-emoticon-neutral-outline",color:"warning"},{result:G.BAD,min:0,max:50,msg:"Stay positive, practice makes perfect",title:"Keep Practicing!",icon:"mdi-emoticon-sad-outline",color:"error"}],It={name:"LessonComplete",emits:["lessonIsFinished"],props:{words_with_mistakes_count:Number,total_words_count:Number,time_spent:Date|String},computed:{percent(){return 100-Math.round(this.words_with_mistakes_count/this.total_words_count*100)},state(){return Tt.find(e=>ke(this.percent,e.min,e.max))},lesson_results(){return[{title:"score",icon:"mdi-bullseye-arrow",text:`${this.percent}%`,style:"round-border score-background"},{title:"time",icon:"mdi-clock-time-two-outline",text:this.time_spent,style:"round-border time-background"}]}},methods:{finishLesson(){this.$emit("lessonIsFinished")}}},St={class:"d-flex justify-center text-h4"},At={class:"text-subtitle-1"},Lt={class:"text-subtitle-1"};function Dt(e,t,i,b,a,l){const u=o("v-card-title"),d=o("v-card-item"),p=o("v-row"),g=o("v-icon"),v=o("v-card"),k=o("v-col"),C=o("v-container"),E=o("v-card-text"),L=o("v-btn"),H=o("v-card-actions");return c(),_(v,{rounded:"lg",width:"360",variant:"flat"},{default:s(()=>[n(d,null,{default:s(()=>[n(u,null,{default:s(()=>[r("div",St,f(l.state.title),1)]),_:1})]),_:1}),n(E,{class:"pb-0"},{default:s(()=>[n(C,null,{default:s(()=>[n(p,{class:"f-flex justify-center"},{default:s(()=>[r("p",At,f(l.state.msg),1)]),_:1}),n(p,{class:"f-flex justify-center mt-4"},{default:s(()=>[n(g,{icon:l.state.icon,color:l.state.color,class:"result-icon"},null,8,["icon","color"])]),_:1}),n(p,{class:"mt-4"},{default:s(()=>[(c(!0),y(R,null,B(l.lesson_results,I=>(c(),_(k,{class:"text-center"},{default:s(()=>[n(v,{class:fe(I.style),variant:"outlined"},{default:s(()=>[n(u,{class:"py-0"},{default:s(()=>[h(f(I.title),1)]),_:2},1024),n(v,{class:"child-card",variant:"outlined"},{default:s(()=>[r("p",Lt,[n(g,{icon:I.icon,class:"pr-2"},null,8,["icon"]),r("b",null,f(I.text),1)])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1}),n(H,{class:"justify-center"},{default:s(()=>[n(L,{onClick:l.finishLesson,variant:"elevated",rounded:"lg",size:"large",block:!0,class:"text-uppercase",color:"success"},{default:s(()=>[h("continue ")]),_:1},8,["onClick"])]),_:1})]),_:1})}const ue=T(It,[["render",Dt],["__scopeId","data-v-2d2f1e32"]]),Ot="/spanish_words_frontend/assets/rocket-c26bbd8c.gif";const Nt={name:"IncorrectAnswers",props:{incorrect_answers:Array}},he=e=>(N("data-v-a1668098"),e=e(),W(),e),Wt=he(()=>r("thead",null,[r("tr",null,[r("th",{class:"text-center text-subtitle-1"},[r("b",null,"EspaÃ±ol")]),r("th",{class:"text-center text-subtitle-1"},[r("b",null,"English")])])],-1)),Rt={class:"text-center text-subtitle-1"},Bt={class:"text-center text-subtitle-1"},Vt=he(()=>r("img",{src:Ot,alt:"Your GIF Alt Text"},null,-1));function $t(e,t,i,b,a,l){const u=o("v-card-title"),d=o("v-table"),p=o("v-card-text"),g=o("v-card");return c(),y("div",null,[i.incorrect_answers.length!==0?(c(),_(g,{key:0,variant:"flat"},{default:s(()=>[n(u,{class:"text-center mb-2"},{default:s(()=>[h(" Uh-oh, some words slipped away! ")]),_:1}),n(p,{class:"text-center"},{default:s(()=>[n(d,{"fixed-header":!0,height:"440px",hover:!0},{default:s(()=>[Wt,r("tbody",null,[(c(!0),y(R,null,B(i.incorrect_answers,v=>(c(),y("tr",null,[r("td",Rt,f(v.en),1),r("td",Bt,f(v.es),1)]))),256))])]),_:1})]),_:1})]),_:1})):(c(),_(g,{key:1,variant:"flat"},{default:s(()=>[n(u,null,{default:s(()=>[h(" Perfecto! No wrong answers, amigo! ")]),_:1}),Vt]),_:1}))])}const me=T(Nt,[["render",$t],["__scopeId","data-v-a1668098"]]);const w={CHECK:0,CONTINUE:1,GOT_IT:2},F=[{state:w.CHECK,color:"success",disabled:!0,text:"check"},{state:w.CONTINUE,color:"success",disabled:!1,text:"continue"},{state:w.GOT_IT,color:"error",disabled:!1,text:"got it"}],A={IN_PROGRESS:0,COMPLETED:1,FINISHED:2},Pt={name:"LessonRunner",components:{TranslateSingleWordView:ae,LessonComplete:ue,IncorrectAnswers:me,TranslateWordsOralView:ce,TranslateSentence:le,ChooseCorrectTranslation:_e,FillSentenceGap:de},props:{translate:Object,lesson_data:Array,practice_type:String},emits:["isLessonFinished"],data(){return{incorrect_answers:[],current_exercise_id:0,current_answer_info:{correct:!1,es:"",en:""},button:F[w.CHECK],lesson_state:A.IN_PROGRESS,force_clean_exercise_content:!1,show_error_message:!1,make_child_readonly:!1,time_spent:""}},created(){this.time_spent=new Date},computed:{is_lesson_in_progress(){return this.lesson_state===A.IN_PROGRESS},is_lesson_completed(){return this.lesson_state===A.COMPLETED},is_lesson_finished(){return this.lesson_state===A.FINISHED},progress_bar_count(){return this.isLastExercise()&&this.button.state!==w.CHECK?this.current_exercise_id+1:this.current_exercise_id},total_words_count(){return this.isMultiWordsCheckExercise()?this.lesson_data[0].word_translation.length:this.lesson_data.length}},watch:{lesson_state(){this.is_lesson_finished&&this.$emit("isLessonFinished",!0)}},methods:{isLessonDataNotEmpty(){return this.lesson_data.length!==0},isExerciseType(e){return this.isLessonDataNotEmpty()&&this.lesson_data[this.current_exercise_id].exercise_type===e},isLastExercise(){return this.current_exercise_id===this.lesson_data.length-1},finishLesson(){this.lesson_state=A.FINISHED},isMultiWordsCheckExercise(){return this.practice_type===Z.TRANSLATE_WORDS_ORAL},isAnswerCorrect(){return this.isMultiWordsCheckExercise()?this.incorrect_answers.length===0:this.current_answer_info.correct},handleIfButtonEnabled(e){this.button.disabled=!e},handleExerciseAnswerWithMultiWords(e){if(e.correct)this.incorrect_answers=this.incorrect_answers.filter(t=>t.en!==e.en||t.es!==e.es);else{let t=e;delete t.correct,this.incorrect_answers.push(t)}},handleExerciseAnswer(e){this.current_answer_info=e},handleCleandExercise(){this.force_clean_exercise_content=!1,this.show_error_message=!1},onButtonClick(){if(this.button.state===w.CHECK){if(this.button=this.isAnswerCorrect()?F[w.CONTINUE]:F[w.GOT_IT],!this.isMultiWordsCheckExercise()&&!this.current_answer_info.correct){let e=this.current_answer_info;delete e.correct,this.incorrect_answers.push(e)}this.show_error_message=!0,this.make_child_readonly=!0}else this.isLastExercise()?(this.lesson_state=A.COMPLETED,this.time_spent=Ce(this.time_spent)):(this.button=F[w.CHECK],this.current_exercise_id+=1,this.force_clean_exercise_content=!0,this.show_error_message=!1,this.button.disabled=!0),this.make_child_readonly=!1}}},Gt=Object.assign(Pt,{setup(e){return(t,i)=>{const b=o("v-progress-linear"),a=o("v-btn"),l=o("v-container"),u=o("v-card");return t.isLessonDataNotEmpty()?(c(),_(l,{key:0,class:"d-flex justify-center fill-height pt-0"},{default:s(()=>[t.is_lesson_in_progress?(c(),_(u,{key:0,"min-width":"360",class:"pa-0",variant:"flat"},{default:s(()=>[n(l,{class:"text-center lesson-area"},{default:s(()=>[n(b,{modelValue:t.progress_bar_count,"onUpdate:modelValue":i[0]||(i[0]=d=>t.progress_bar_count=d),max:e.lesson_data.length,height:13,rounded:"",color:"green",class:"my-3 mt-2"},null,8,["modelValue","max"]),t.isExerciseType(D.TRANSLATE_SINGLE_WORD)?(c(),_(ae,{key:0,exercise_data:e.lesson_data[t.current_exercise_id],translate:e.translate,show_error_message:t.show_error_message,clean_exercise:t.force_clean_exercise_content,is_readonly:t.make_child_readonly,onExerciseCheckEnabled:t.handleIfButtonEnabled,onIsExerciseDoneCorrect:t.handleExerciseAnswer,onExerciseCleaned:t.handleCleandExercise,onCheckExercise:t.onButtonClick},null,8,["exercise_data","translate","show_error_message","clean_exercise","is_readonly","onExerciseCheckEnabled","onIsExerciseDoneCorrect","onExerciseCleaned","onCheckExercise"])):t.isExerciseType(D.TRANSLATE_WORDS_ORAL)?(c(),_(ce,{key:1,exercise_data:e.lesson_data[t.current_exercise_id],translate:e.translate,is_readonly:t.make_child_readonly,onExerciseCheckEnabled:t.handleIfButtonEnabled,onIsExerciseDoneCorrect:t.handleExerciseAnswerWithMultiWords},null,8,["exercise_data","translate","is_readonly","onExerciseCheckEnabled","onIsExerciseDoneCorrect"])):t.isExerciseType(D.TRANSLATE_SENTENCE)?(c(),_(le,{key:2,exercise_data:e.lesson_data[t.current_exercise_id],translate:e.translate,show_error_message:t.show_error_message,clean_exercise:t.force_clean_exercise_content,is_readonly:t.make_child_readonly,onExerciseCheckEnabled:t.handleIfButtonEnabled,onIsExerciseDoneCorrect:t.handleExerciseAnswer,onExerciseCleaned:t.handleCleandExercise,onCheckExercise:t.onButtonClick},null,8,["exercise_data","translate","show_error_message","clean_exercise","is_readonly","onExerciseCheckEnabled","onIsExerciseDoneCorrect","onExerciseCleaned","onCheckExercise"])):t.isExerciseType(D.CHOOSE_CORRECT_TRANSLATION)?(c(),_(_e,{key:3,exercise_data:e.lesson_data[t.current_exercise_id],translate:e.translate,show_error_message:t.show_error_message,clean_exercise:t.force_clean_exercise_content,is_readonly:t.make_child_readonly,onExerciseCheckEnabled:t.handleIfButtonEnabled,onIsExerciseDoneCorrect:t.handleExerciseAnswer,onExerciseCleaned:t.handleCleandExercise},null,8,["exercise_data","translate","show_error_message","clean_exercise","is_readonly","onExerciseCheckEnabled","onIsExerciseDoneCorrect","onExerciseCleaned"])):t.isExerciseType(D.FILL_GAP_IN_SENTENCE)?(c(),_(de,{key:4,exercise_data:e.lesson_data[t.current_exercise_id],translate:e.translate,show_error_message:t.show_error_message,clean_exercise:t.force_clean_exercise_content,is_readonly:t.make_child_readonly,onExerciseCheckEnabled:t.handleIfButtonEnabled,onIsExerciseDoneCorrect:t.handleExerciseAnswer,onExerciseCleaned:t.handleCleandExercise},null,8,["exercise_data","translate","show_error_message","clean_exercise","is_readonly","onExerciseCheckEnabled","onIsExerciseDoneCorrect","onExerciseCleaned"])):x("",!0),n(a,{color:t.button.color,disabled:t.button.disabled,onClick:t.onButtonClick,variant:"elevated",rounded:"lg",size:"large",class:"text-uppercase small-button mt-6"},{default:s(()=>[h(f(t.button.text),1)]),_:1},8,["color","disabled","onClick"])]),_:1})]),_:1})):t.is_lesson_completed?(c(),_(ue,{key:1,words_with_mistakes_count:t.incorrect_answers.length,total_words_count:t.total_words_count,time_spent:t.time_spent,onLessonIsFinished:t.finishLesson},null,8,["words_with_mistakes_count","total_words_count","time_spent","onLessonIsFinished"])):t.is_lesson_finished?(c(),_(me,{key:2,incorrect_answers:t.incorrect_answers},null,8,["incorrect_answers"])):x("",!0)]),_:1})):x("",!0)}}}),Ft=T(Gt,[["__scopeId","data-v-8051742d"]]);const jt={name:"PracticeView",components:{LessonRunner:Ft},data(){return{is_parameters_select_disabled:!1,selected_gsheet:null,gsheets:[],gsheets_loading:!0,selected_category:null,categories:[],categories_loading:!1,selected_category_key:null,category_keys:[],category_key_loading:!1,select_latest_words:!1,selected_number:ne[0],numbers:ne,languages:[V.ENGLISH,V.SPANISH],selected_language:V.ENGLISH,practice_type:Z.TRANSLATE_WORDS_WRITING,practices:ye,words_loading:!1,is_lesson_complete:!1,translate:{from:"en",to:"es"},lesson_data:[]}},async mounted(){await this.getSpreadsheets()},watch:{selected_gsheet:function(){this.selected_category=null,this.selected_category_key=null,this.getThemes()},selected_category:function(){this.selected_category_key=null,this.getSubThemes()},selected_category_key:function(){if(this.selected_category_key==null||this.selected_category_key.length===0){this.select_latest_words=!1;return}if(this.select_latest_words&&this.selected_category_key.length>1){const e=this.selected_category_key.indexOf(K);e!==-1&&this.selected_category_key.splice(e,1),this.select_latest_words=!1}},selected_language:function(){this.selected_language===V.ENGLISH?(this.translate.from="en",this.translate.to="es"):(this.translate.from="es",this.translate.to="en")}},computed:{isAllCategoriesSelected(){return this.selected_category_key==null||this.category_keys.length===0?!1:this.selected_category_key.length===this.category_keys.length}},methods:{async getSpreadsheets(){$.get(`${P}/api/spreadsheet/titles/`).then(e=>this.gsheets=e.data).catch(e=>this.showErrorToast(e)).finally(()=>this.gsheets_loading=!1)},async getThemes(){this.gsheets.length!==0&&this.gsheets.includes(this.selected_gsheet)&&(this.categories_loading=!0,$.get(`${P}/api/worksheet/columns/`,{params:{title:this.selected_gsheet}}).then(e=>this.categories=e.data).catch(e=>this.showErrorToast(e)).finally(()=>this.categories_loading=!1))},async getSubThemes(){if(this.gsheets.length===0||this.categories.length===0)return;let e=[];Object.entries(this.categories).forEach(([t,i])=>{e.push(i.id)}),e.includes(this.selected_category)&&(this.category_key_loading=!0,$.get(`${P}/api/worksheet/colums/unique_values/`,{params:{title:this.selected_gsheet,column_id:this.selected_category}}).then(t=>this.category_keys=t.data).catch(t=>this.showErrorToast(t)).finally(()=>this.category_key_loading=!1))},async getWords(){if(!this.isPreRequestRequirementsSatisfied(!0,!0,!0))return;this.is_parameters_select_disabled=!0,this.words_loading=!0;const e=this.select_latest_words?"latest_values":"random_values";$.get(`${P}/api/worksheet/${e}/`,{params:{title:this.selected_gsheet,filter_column_id:this.selected_category,template:this.selected_category_key.join("|"),column_ids:"0,1",count:this.selected_number,practice_type:this.practice_type}}).then(t=>{this.formLessonData(t.data)}).catch(t=>this.showErrorToast(t)).finally(()=>this.words_loading=!1)},handleFinishLesson(){this.is_parameters_select_disabled=!1},isCategoriesEmpty(){return this.selected_category_key?this.selected_category_key.length===0:!0},formLessonData(e){if(this.lesson_data=[],this.practice_type===Z.TRANSLATE_WORDS_WRITING)this.lesson_data=e;else{this.lesson_data=e;const t=this.lesson_data[0].word_translation.length;for(let i=0;i<t;++i)this.lesson_data[0].word_translation[i].icon=Q.REMEMBERED,this.lesson_data[0].word_translation[i].color=X.GOOD,this.lesson_data[0].word_translation[i].user_knows_translation=!0}},isPreRequestRequirementsSatisfied(e=!1,t=!1,i=!1){return e&&this.selected_gsheet===null?(O().info(q+"google sheet"),!1):t&&this.selected_category===null?(O().info(q+"words filtering key"),!1):i&&(this.selected_category_key===null||this.selected_category_key.length===0)?(O().info(q+"words category"),!1):!0},showErrorToast(e){console.log(e),e.response.status===401?(O().info(xe),setTimeout(()=>{this.$router.push("/login")},ve)):O().error(be)},selectAll(){this.selected_category_key==null||this.selected_category_key.length!==this.category_keys.length?this.selected_category_key=[...this.category_keys]:this.selected_category_key=[]},selectLatest(){if(!this.select_latest_words)this.selected_category_key=[K];else{const e=this.selected_category_key.indexOf(K);e!==-1&&this.selected_category_key.splice(e,1)}this.select_latest_words=!this.select_latest_words}}},Mt={class:"parameters-column text-center"},zt={key:1,class:"text-grey text-caption align-self-center"};function Ut(e,t,i,b,a,l){const u=o("v-icon"),d=o("v-tooltip"),p=o("v-select"),g=o("v-list-item"),v=o("v-checkbox-btn"),k=o("v-divider"),C=o("v-chip"),E=o("v-autocomplete"),L=o("v-list"),H=o("v-btn"),I=o("v-col"),pe=o("v-progress-circular"),ee=o("v-row"),ge=o("lesson-runner");return c(),_(ee,null,{default:s(()=>[n(I,{cols:"12",xs:"12",sm:"12",md:"3"},{default:s(()=>[r("div",Mt,[n(L,null,{default:s(()=>[n(g,null,{prepend:s(()=>[n(d,{text:"Google sheet to retrieve words",location:"bottom"},{activator:s(({props:m})=>[n(u,S({icon:"mdi-google-spreadsheet",size:"x-large"},m,{color:a.selected_gsheet?"success":"grey-darken-3"}),null,16,["color"])]),_:1})]),default:s(()=>[n(p,{label:"Google sheet",modelValue:a.selected_gsheet,"onUpdate:modelValue":t[0]||(t[0]=m=>a.selected_gsheet=m),items:a.gsheets,loading:a.gsheets_loading,clearable:!0,disabled:a.is_parameters_select_disabled,"hide-details":!0,variant:"outlined",class:"my-2 my-button"},null,8,["modelValue","items","loading","disabled"])]),_:1}),n(g,null,{prepend:s(()=>[n(d,{text:"Column with the words categories",location:"bottom"},{activator:s(({props:m})=>[n(u,S({icon:"mdi-shape-outline",size:"x-large"},m,{color:a.selected_category?"success":"grey-darken-3"}),null,16,["color"])]),_:1})]),default:s(()=>[n(p,{label:"Google sheet base column",modelValue:a.selected_category,"onUpdate:modelValue":t[1]||(t[1]=m=>a.selected_category=m),items:a.categories,"item-title":"text","item-value":"id",loading:a.categories_loading,clearable:!0,disabled:a.is_parameters_select_disabled,"hide-details":!0,variant:"outlined",class:"my-2"},null,8,["modelValue","items","loading","disabled"])]),_:1}),n(g,null,{prepend:s(()=>[n(d,{text:"Categories of words to repeat",location:"bottom"},{activator:s(({props:m})=>[n(u,S({icon:"mdi-shape-plus",size:"x-large"},m,{color:l.isCategoriesEmpty()?"grey-darken-3":"success"}),null,16,["color"])]),_:1})]),default:s(()=>[n(E,{label:"Words categories",modelValue:a.selected_category_key,"onUpdate:modelValue":t[2]||(t[2]=m=>a.selected_category_key=m),items:a.category_keys,loading:a.category_key_loading,clearable:!0,disabled:a.is_parameters_select_disabled,multiple:"true","hide-details":"true",variant:"outlined","menu-props":{maxWidth:5},class:"my-2"},Ee({selection:s(({item:m,index:te})=>[te<2?(c(),_(C,{key:0},{default:s(()=>[r("span",null,f(m.title),1)]),_:2},1024)):x("",!0),te===2?(c(),y("span",zt," (+"+f(a.selected_category_key.length-2)+" others) ",1)):x("",!0)]),_:2},[a.category_keys.length!==0?{name:"prepend-item",fn:s(()=>[n(g,{title:"all categories",onClick:l.selectAll},{prepend:s(()=>[n(v,{"model-value":l.isAllCategoriesSelected},null,8,["model-value"])]),_:1},8,["onClick"]),n(g,{title:"latest added words",onClick:l.selectLatest},{prepend:s(()=>[n(v,{"model-value":a.select_latest_words},null,8,["model-value"])]),_:1},8,["onClick"]),n(k,{class:"my-1"})]),key:"0"}:void 0]),1032,["modelValue","items","loading","disabled"])]),_:1}),n(g,null,{prepend:s(()=>[n(d,{text:"Original language to translate from",location:"bottom"},{activator:s(({props:m})=>[n(u,S({icon:"mdi-translate",size:"x-large"},m,{color:"success"}),null,16)]),_:1})]),default:s(()=>[n(p,{label:"Original language",modelValue:a.selected_language,"onUpdate:modelValue":t[3]||(t[3]=m=>a.selected_language=m),items:a.languages,disabled:a.is_parameters_select_disabled,"hide-details":!0,variant:"outlined",class:"my-2"},null,8,["modelValue","items","disabled"])]),_:1}),n(g,null,{prepend:s(()=>[n(d,{text:"Number of words to repeat",location:"bottom"},{activator:s(({props:m})=>[n(u,S({icon:"mdi-counter",size:"x-large"},m,{color:"success"}),null,16)]),_:1})]),default:s(()=>[n(p,{label:"Number of words to repeat",modelValue:a.selected_number,"onUpdate:modelValue":t[4]||(t[4]=m=>a.selected_number=m),items:a.numbers,disabled:a.is_parameters_select_disabled,variant:"outlined","hide-details":!0,class:"my-2"},null,8,["modelValue","items","disabled"])]),_:1}),n(g,null,{prepend:s(()=>[n(d,{text:"Practise type. Each has different exercises",location:"bottom"},{activator:s(({props:m})=>[n(u,S({icon:"mdi-animation",size:"x-large"},m,{color:"success"}),null,16)]),_:1})]),default:s(()=>[n(p,{label:"Practice type",modelValue:a.practice_type,"onUpdate:modelValue":t[5]||(t[5]=m=>a.practice_type=m),items:a.practices,disabled:a.is_parameters_select_disabled,variant:"outlined","hide-details":!0,"item-title":"title","item-value":"value",class:"my-2"},null,8,["modelValue","items","disabled"])]),_:1})]),_:1}),n(H,{rounded:"lg",size:"large",class:"text-uppercase mt-3 my-button",text:"start lesson",color:"success",disabled:a.is_parameters_select_disabled,onClick:l.getWords},null,8,["disabled","onClick"])])]),_:1}),n(I,{cols:"12",xs:"12",sm:"12",md:"9"},{default:s(()=>[a.words_loading?(c(),_(ee,{key:0,class:"justify-center fill-height align-center"},{default:s(()=>[n(pe,{indeterminate:"",color:"success",size:60,width:12})]),_:1})):(c(),_(ge,{key:1,lesson_data:a.lesson_data,translate:a.translate,practice_type:a.practice_type,onIsLessonFinished:l.handleFinishLesson},null,8,["lesson_data","translate","practice_type","onIsLessonFinished"]))]),_:1})]),_:1})}const Kt=T(jt,[["render",Ut],["__scopeId","data-v-c2e7bf98"]]);export{Kt as default};
