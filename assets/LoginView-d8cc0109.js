import{_ as w,u as _,b as x,d as l,k as V,r as t,o as y,c as k,w as a,e as s,f as S,g as I,p as T,h as U,a as z}from"./index-532e961d.js";const B={setup(){return{store:_()}},data(){return{user:"",password:"",loading:!1,isValid:null}},computed:{is_submit_button_active(){return this.user!==""&&this.password!==""}},methods:{showErrorToast(e){console.log("incorrect credentials",e),x().error("Incorrect credentials")},async submit(){await this.checkCredentials()},async checkCredentials(){localStorage.clear(),this.loading=!0,l.post(`${V}/api/v1/jwt/create/`,{username:this.user,password:this.password}).then(e=>{const o=_(),n=e.data.access;o.setAccessToken(n),localStorage.setItem("access",n);const c=e.data.refresh;o.setRefreshToken(c),localStorage.setItem("refresh",c),l.defaults.headers.common.Authorization="JWT "+n,this.isValid=!0,this.$router.push("/practice")}).catch(e=>{l.defaults.headers.common.Authorization="",this.isValid=!1,this.showErrorToast(e)}).finally(()=>this.loading=!1)}}},C=e=>(T("data-v-253acbae"),e=e(),U(),e),j=C(()=>z("p",{class:"text-center text-h3 pb-2"},"Sign in",-1));function A(e,o,n,c,r,d){const u=t("v-text-field"),p=t("router-link"),m=t("v-card-text"),h=t("v-btn"),f=t("v-card-actions"),v=t("v-form"),b=t("v-card"),g=t("v-container");return y(),k(g,{align:"center",justify:"center"},{default:a(()=>[s(b,{width:"400",variant:"flat"},{title:a(()=>[j]),default:a(()=>[s(v,{"validate-on":"submit lazy",onSubmit:S(d.submit,["prevent"]),"model-value":r.isValid},{default:a(()=>[s(m,null,{default:a(()=>[s(u,{"prepend-inner-icon":"mdi-account",label:"Username",modelValue:r.user,"onUpdate:modelValue":o[0]||(o[0]=i=>r.user=i),variant:"outlined",class:"mb-4","hide-details":!0},null,8,["modelValue"]),s(u,{"prepend-inner-icon":"mdi-form-textbox-password",label:"Password",modelValue:r.password,"onUpdate:modelValue":o[1]||(o[1]=i=>r.password=i),type:"password",variant:"outlined",class:"mb-4","hide-details":!0},null,8,["modelValue"]),s(p,{to:"/login",class:"text-center text-subtitle-1"},{default:a(()=>[I(" Forgot your password? ")]),_:1})]),_:1}),s(f,{class:"align-center justify-center"},{default:a(()=>[s(h,{loading:r.loading,text:"submit",rounded:"lg",size:"large",class:"text-uppercase",type:"submit",color:"success",variant:"elevated",disabled:!d.is_submit_button_active},null,8,["loading","disabled"])]),_:1})]),_:1},8,["onSubmit","model-value"])]),_:1})]),_:1})}const E=w(B,[["render",A],["__scopeId","data-v-253acbae"]]);export{E as default};
